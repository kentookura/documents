The issues we encountered in the introduction all stem from the fact that the Zariski topology is very coarse. Grothendieck found a natural generalisation of the notion of topology, allowing not only open subsets $U \subseteq X$ but more generally morphisms of schemes $Y \to X$ to play the role of open set. Specifically, he defined the \textit{\'etale site of $X$}, a generalised topology on $X$, consisting of the following:

\begin{itemize}
  \item The category of \'etale schemes $\text{\'Et}/X$ over $X$. This category consists of schemes $S$ together with an \'etale morphism $f: S \to X$. These morphisms formally behave like local homeomorphisms. 
  \item A notion of covering. In this case a covering of $X$ is a family of \'etale morphisms $\{\varphi_i: U_i \to X\}$ such that they are jointly surjective, $\bigcup_i im(\varphi_i) = X$. 
\end{itemize}

In this section we will define and study \'etale morphisms.  Because \'etale morphisms behave like local homeomorphisms, it is possible to realise the theory of covering spaces for schemes. In particular this means that we get a good notion the fundamental groups $\pi_1(X)$. The definition of a sheaf carries over seamlessly from the classical case of topological spaces to the case of sheaves on sites. The \'etale topos $\mathsf{Sh}(X)$ of a scheme $X$ is the category of sheaves on the \'etale site of $X$.  The \'etale topos of $X$ may be thought of as a generalised space, locally modeled on $X$, with a close relation to the geometric properties of $X$.  Furthermore, the \'etale topos $\mathsf{Sh}(X)$ also allows us to compute cohomology for sheaves which have vanishing cohomology in the Zariski setting. In this sense the \'etale site of a scheme is a much finer topology than the Zariski topology.

\subsection{\'Etale Algebras}
We begin our discussion with the simple case of \'etale covers of $X = \Spec(k)$, where $k$ is a field. In order to model the notion of local homeomorphism, it is reasonable to demand that for $f: Y \to \Spec(k)$ to be a local homeomorphism,  the underlying topological space of $Y$ should consist of a finite number of disjoint points. If we restrict our attention to the case that $Y$ is affine, it follows that $Y = \Spec(\prod L_i)$ where each $L_i$ is a field extension of $k$. 

\begin{definition}[finite \'etale algebras]
  A finite dimensional $k$-algebra $A$ is \'etale over $k$ if it is isomorphic to a product of separable extensions of $k$. We define $\Spec(A) \to \Spec(k)$ to be \'etale if $A$ is an \'etale algebra over $k$.
\end{definition}

Recall that an extension $L/k$ is separable if its minimal polynomial $p(x)$ has no multiple roots (in a splitting field of $p(x)$). It follows from basic algebra that a polynomial $p(x)$ is separable if and only if it is coprime to its derivative $p'(x)$. This means that $p'(x)$ gets mapped to a unit under the canonical map $k[x] \to k[x]/(p(x)) \simeq L$. This is in effect a smoothness condition, reminiscent of the conditions under which the inverse mapping theorem from analysis holds. This idea will reappear when we define \'etale morphisms in a more general condition.

\subsubsection{Galois theory for finite \'etale algebras}
We recall the basics of Galois theory as Grothendieck formulated them.

\begin{construction}[Reminder on Galois theory]
  Let $k$ be a field and fix once and for all separable and algebraic closures $k_s \subset \overline{k}$.  An algebraic extension $L$ of $k$ is a \textit{Galois extension} if the elements of $L$ that are fixed under the automorphism group $\Aut_k(L)$ are precisely the elements of $k$. In this case we call $\Aut_k(L)$ the \textit{Galois group} of $L$ over $k$ and denote it by $\Gal(L/k)$. A separable extension $L/k$ is Galois if and only if the minimal polynomial of each element $a \in L$ splits into linear factors in $L$. In particular $k_s$ is a Galois extension. We call its Galois grouop the \textit{absolute Galois group of $k$} and denote it by $\Gal(k)$. If $k_s$ is an infinte extension, $\Gal(k)$ is a profinite group and hence carries a totally disconnected topology. Let $L$ be a finite separable extension of $k$. The set $\Hom_k(L, k_s)$ is finite and equal to $[L:k]$. This set is endowed with a left action of $\Gal(k_s/k)$ given by $\varphi \to g \circ \varphi$ for $g \in \Gal(k)$ and $\varphi \in \Hom_k(L, k_s)$. The action of $\Gal(k)$ is continuous if $\Hom(L, k_s)$ is given the discrete topology. In this case, we can verify continuity by checking that each stabilizer 
  \[G_x = \{ g \in G \mid g \circ \varphi =  \varphi \forall\ \varphi \in \Hom_k(L, k_s)\}, \]
  which is easy to check.
\end{construction}

\begin{proposition}
  The action of $\Gal(k)$ on $\Hom_k(L, k_s)$ is continuous and transitive and $\Hom_k(L, k_s)$ is isomorphic as a left $\Gal(k)$-set to the $\Gal(k)$-set $G/U$ for some open subgroup $U \subseteq \Gal(k)$
\end{proposition}

\begin{theorem}[Main Theorem of Galois Theory, Grothendieck's version]
  Let $k$ be a field. The functor mapping a finite \'etale $k$-algebra $A$ to the finite set $\Hom_k(A, k_s)$ induces an equivalence of categories between the cateogry of finite \'etale $k$-algebras and the category of finite sets with a continous left $\text{Gal}(k)$-action.
\end{theorem}

This theorem is strongly reminiscent of the following theorem from algebraic topology:

\begin{theorem}
  Let $(X,x)$ be a pointed, connected and locally simply connected topological space. The fiber functor $\text{Fib}_x$ induces an equivalence of categories between the category of covers of $X$ with the category of left $\pi_1(X,x)$-sets.
\end{theorem}

See Chapter (...) for the definitions used in the statement.

Let $L/K$ be a finite field extension of degree $n$. Each element $a$ of $L$ induces a $K$-linear map 
\[
  m_a: L \to L,\ b \to ab.
\]
Since $L \cong K^{\oplus n}$ as a $K$-module, we may choose a basis of $L$ over $K$ and represent the map $m_a$ as an $n \times n$ matrix with entries in $K$. We may take the trace and determinant of this matrix. But the trace and determinant are independent of the choice of the choice of basis, so
\[ 
  \Tr_{L/K}(a) = \Tr(\text{matrix of }m_a)
\]
and
\[ 
  \Norm_{L/K}(a) = \text{det}(\text{matrix of }m_a).
\]
are well defined.

\begin{definition}
  Let $L/K$ be a finite field extension. The \textit{trace pairing for $L/K$} is the symmetric $K$-bilinear form
  \[
    Q_{L/K} : L \times L \to K,\ (a,b) \to \Tr_{L/K}(ab)
  \]
\end{definition}

\begin{lemma}
  Let $L/K$ be a finite field extension. The following are equivalent:
  \begin{enumerate}
    \item $L/K$ is separable.
    \item $\Tr_{L/K}$ is not identically zero.
    \item $Q_{L/K}$ is nondegenerate.
  \end{enumerate}
\end{lemma}

\begin{proof}
  The equivalence of (2.) and (3.) are clear. 
  For the equivalence of (1.) and (2.) see (Keith Conrad, separability)
  %The trace map is $K$-linear with target $K$ so it is either  identically 0 or surjective.  We only have to consider the case where $K$ has characteristic $p \neq 0$, since finite extensions in characteristic 0 are always separable and $\Tr_{L/K}(1) = [L:K] \neq 0$ in characteristic 0.\par
  %Let $L/K$ be separable. By the primitive element theorem we can write $L = K(\alpha)$, where $\alpha$ is separable over $K$.
\end{proof}

\begin{theorem}
  Let $A$ be a finite dimensional commutative $k$-algebra and denote by $\overline{A}$ the $\overline{k}$-algebra $A \otimes_k \overline{k}$. The following are equivalent:
  \begin{enumerate}
    \item $A$ is \'etale over $k$.\label{etale}
    \item $A \otimes_k \overline{k}$ is isomorphic to a finite product of copies of $\overline{k}$, hence \'etale over $\overline{k}$.\label{product}
    \item $A \otimes_k \overline{k}$ is reduced
    \item The discriminant of any basis of $A$ over $k$ is nonzero.\label{trace}
    %The trace pairing $A \times A \to k, (x,y) \to \text{Tr}(xy)$ is nondegenerate.
  \end{enumerate}
\end{theorem}

\begin{proof}
  (\Implies{etale}{product}):
  Suppose that $L$ is a finite separable extension of $k$. This means that $L = k[x]/(f)$, where $f$ is a polynomial of degree $n$ which splits into $n$ distinct factors, say $(x-\alpha_i)$ in $\overline{k}$. By the chinese remainder theorem we have
  \[L \otimes_k \overline{k} \cong \overline{k}[x]/(f) = \overline{k}[x]/(x-\alpha_1)\cdots(x-\alpha_n) \cong \prod_{i=1}^n \overline{k}[x] / (x-\alpha_i) \cong \prod_{i=1}^n \overline{k},\] from which the first direction follows.\\
  (\Implies{etale}{trace}):
  If $A = \prod k_i$  where each $k_i$ is a separable field extension of $k$, then $\text{disc}(A) = \prod \text{disc}(k_i)$ which is nonzero by the fact that $\text{disc}(k_i) \neq 0$ if $k_i$ is a separable extension.
  %TODO finish the proof
\end{proof}

We generalise the notion of \'etale algebra to algebras over a ring.

\begin{definition}
  Let $R$ be a ring, $A$ a free $R$-algebra of finite rank. As before, every $a \in A$ defines an $R$-linear map by multiplication and the trace map $A \to R$ is well defined. We say that $A$ is a \textit{separable} or \textit{\'etale} algebra if the $R$-bilinear mapping 
  \[
    Q : A \times A \to R,\ (a,b) \to \Tr(ab)
  \]
  is nondegenerate.
\end{definition}

\subsection{\'Etale morphisms of schemes}
\begin{definition}
A morphism of schemes $f: X \to Y$ is called \textit{affine} if there is an open affine cover by subsets $U_i$ such that $f^{-1}(U_i)$ is affine for each $i$.  A morphism of schemes $f: X \to Y$ is called \textit{finite} if there is an affine cover by subsets $U_i = \Spec(A)$ such that $f^{-1}(U_i) = \Spec(B_i)$ is a finitely generated $A_i$-module.  If moreover each $B_i$ is a fee separable $A_i$-algebra, it is said to be \'etale.
%We say that $f: X \to S$ is finite locally free if $f$ is affine and $f_* \Sh{O}_X$ is locally free and of finite rank.
%If each fibre $X_p$ of $f$ is the spectrum of a finite \'etale $\kappa(p)$-algebra, then we say $f$ is an \'etale morphism.
\end{definition}
It follows that $f: \Spec(B) \to \Spec(A)$ is an \'etale morphism if and only if $B$ is an \'etale $A$-algebra.

\begin{lemma}
  \begin{enumerate}
    \item The composition of affine morphisms is affine.
    \item The composition of finite locally free morphisms is finite locally free.
    \item The composition of \'etale morphisms is \'etale.
  \end{enumerate}
\end{lemma}
\begin{proof}
  The first statement follows immediately from the fact that a morphism $f: X \to Y$ is affine if and only if for \textit{every} affine open $V \subseteq X$, $f^{-1}(V)$ is affine, see\cite{Hartshorne}.
\end{proof}


\begin{lemma}
  If $f: Y \to X$ is \'etale, then the base change $U \times_X Y$ along any morphism $U \to X$ is \'etale.
\end{lemma}
\begin{definition}
  A surjective finite \'etale morphism is called an \'etale cover. An \'etale cover $\varphi : Y \to X$ is claled trivial if $Y$ is isomorphic do a finite disjoint union of copies of $X$ $Y \cong \coprod X$ and $\varphi$ restricts to the identity on each component.
\end{definition}

\begin{theorem} 
  \label{locallyTrivial}
  Let $X$ be a connected scheme and $\varphi : Y \to X$ an affine surjective morphism. Then $\varphi$ is finite \'etale if and only if there is a finite, locally free and surjective morphism $f: S \to X$ such that $Y \times_X S$ is a trivial cover of $S$.
\end{theorem}
\begin{proof}
  $(\implies)$
  We first show that $\varphi$ is finite and locally free. Since $f$ is locally free, each point of $X$ has an affine open neighborhood $U = \Spec(R)$ such that $f$ restricts to a morphism $\Spec(A) \to \Spec(R)$ where $A$ is a finitely generated and free $R$-module. Since $\varphi$ is affine, it restricts to $\Spec(B) \to \Spec(R)$ over $U$ and the basechange $S \times_X Y$ restricts to $\Spec(A \otimes_R B)$ over $\Spec(R)$. By assumption $A \otimes_R B$ is a finitely generated and free $A$-module, so it is also fnitely generated and free as an $R$-module. It is also isomorphic to a finite direct sum of copies of $A$. This can only happen if $B$ is finitely generated and free over $R$.
    \[
    % https://q.uiver.app/?q=WzAsOCxbMCwxLCJTIl0sWzEsMCwiWSJdLFsxLDEsIlgiXSxbMCwwLCJTIFxcdGltZXNfWCBZIl0sWzIsMCwiXFxTcGVjKEEgXFxvdGltZXNfUkIpIl0sWzIsMSwiXFxTcGVjKEEpIl0sWzMsMSwiXFxTcGVjKFIpIl0sWzMsMCwiXFxTcGVjKEIpIl0sWzEsMiwiXFx2YXJwaGkiXSxbMCwyLCJmIiwyXSxbMywxXSxbMywwXSxbNCw1XSxbNSw2XSxbNCw3XSxbNyw2XV0=
    \begin{tikzcd}
    	{S \times_X Y} & Y & {\Spec(A \otimes_RB)} & {\Spec(B)} \\
    	S & X & {\Spec(A)} & {\Spec(R)}
    	\arrow["\varphi", from=1-2, to=2-2]
    	\arrow["f"', from=2-1, to=2-2]
    	\arrow[from=1-1, to=1-2]
    	\arrow[from=1-1, to=2-1]
    	\arrow[from=1-3, to=2-3]
    	\arrow[from=2-3, to=2-4]
    	\arrow[from=1-3, to=1-4]
    	\arrow[from=1-4, to=2-4]
    \end{tikzcd}
    \]
  Now let $\overline{x} : \Spec(\overline{k}) \to S$ be a geometric point of $S$. By composition with $f$ we get a geometric point of $X$. Now the geometric fibers $Y_{(f \circ \overline{x})}$ and $(S \times_X Y)_{\overline{x}}$  are isomorphic by the universal property of pullbacks. 
  \[
  % https://q.uiver.app/?q=WzAsOSxbMiwxLCJYIl0sWzIsMCwiWSJdLFsxLDAsIllfeyhmIFxcY2lyYyBcXG92ZXJsaW5le3h9KX0iXSxbMSwxLCJcXG92ZXJsaW5le2t9Il0sWzMsMCwiKFMgXFx0aW1lc19YIFkpX3tcXG92ZXJsaW5le3h9fSJdLFszLDEsIlxcb3ZlcmxpbmV7a30iXSxbNCwwLCJTIFxcdGltZXNfWCBZIl0sWzQsMSwiUyJdLFswLDJdLFsxLDBdLFsyLDFdLFszLDAsImYgXFxjaXJjIFxcb3ZlcmxpbmV7eH0iLDJdLFsyLDNdLFs0LDVdLFs0LDZdLFs2LDddLFs1LDcsIlxcb3ZlcmxpbmV7eH0iLDJdXQ==
\begin{tikzcd}
	& {Y_{(f \circ \overline{x})}} & Y & {(S \times_X Y)_{\overline{x}}} & {S \times_X Y} \\
	& {\overline{k}} & X & {\overline{k}} & S \\
	{}
	\arrow[from=1-3, to=2-3]
	\arrow[from=1-2, to=1-3]
	\arrow["{f \circ \overline{x}}"', from=2-2, to=2-3]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-4, to=2-4]
	\arrow[from=1-4, to=1-5]
	\arrow[from=1-5, to=2-5]
	\arrow["{\overline{x}}"', from=2-4, to=2-5]
\end{tikzcd}
\]
By assumption, $(S\times_X Y)_{\overline{x}} \cong \prod \Spec(\overline{k})$ and since $f$ is surjective, all of the fibers of $\varphi$ are also \'etale.
\end{proof}
Theorem \ref{locallyTrivial} shows that \'etale morphsism are locally trivial in the \'etale topology.

\begin{remark}
  If we have an \'etale cover $f: Y \to X$ and consider a geometric point $\overline{x} : \Spec(\Omega) \to X$ of $X$, then the fiber of $f$ over $\overline{x}$ arises from the pullback
    % https://q.uiver.app/?q=WzAsNCxbMCwwLCJTcGVjKFxcT21lZ2EpXFx0aW1lc19YIFkiXSxbMCwxLCJTcGVjKFxcT21lZ2EpIl0sWzEsMCwiWSJdLFsxLDEsIlgiXSxbMCwxXSxbMCwyXSxbMiwzXSxbMSwzXV0=
    \[\begin{tikzcd}
    	{\Spec(\Omega)\times_X Y} & Y \\
    	{\Spec(\Omega)} & X
    	\arrow[from=1-1, to=2-1]
    	\arrow[from=1-1, to=1-2]
    	\arrow[from=1-2, to=2-2]
    	\arrow[from=2-1, to=2-2]
    \end{tikzcd}\]
  Since $\Spec(\Omega)\times_X Y$ is \'etale over $\Spec(\Omega)$ and $\Omega$ is algebraically closed, it follows that $\Spec(\Omega)\times_X Y \cong \coprod \Spec(\Omega)$.
\end{remark}

\subsection{Galois theory for \'etale covers}
\begin{definition}[The fiber functor $F_x$]
  Let $x: \Spec(\Omega) \to X$ be a geometric point, where $\Omega$ is an algebraically field. The fiber functor at $x$ associates to each \'etale cover $f: Y \to X$ the underlying set of $\Spec(\Omega) \times_X Y$.
\end{definition}

\begin{remark}
  In topology, the fiber functor is representable if $X$ is a connected and locally simply connected space. The representing object $\tilde{X}$ is called the universal covering. In algebraic geometry this functor is usually not representable. It is however pro-representable:
\end{remark}

\begin{definition}[Pro-representability]
  Let $C$ be a category and $F: C \to \Set$ a functor. We say that $F$ is \textit{pro-representable} if there exists an \Gls{inverse system} $(A_\alpha,\varphi_{\alpha \beta})$ in $C$ such that 
  \[
    \varinjlim \Hom(A_\alpha, X) \cong F(X)
    \]
  for each $X$ in $C$.
\end{definition}
\begin{lemma}
  Let $f: Y \to X$ be a connected finite \'etale cover. There is a morphism $\varphi: S \to Y$ such that $f \circ \varphi: S \to X$ is a finite \'etale cover. Moreover every morphism over $X$ from a Galois cover to $Y$ factors through $\varphi$.
\end{lemma}

\begin{theorem}\label{thm:pro_rep}
  The fiber functor $F_{\overline{x}}$ is prorepresentable.
\end{theorem}
\begin{proof}[Proof of theorem \ref{thm:pro_rep}]
  We need to construct an inverse system in $Fet/X$ such that the above isomorphism holds. Take as index set $I$ all finite \'etale Galois covers $A_\alpha$ of $X$. This set is directed under the order $A_\alpha \le A_\beta$, since the connected components fiber product
\end{proof}

\begin{theorem}
  Let $X$ be a scheme and $\overline{x} : \Spec(\Omega) \to X$ a geometric point.
\end{theorem}

\begin{definition}[Galois covers]
  A connected finite \'etale cover $Y \to X$ is \textit{Galois} if its group of $X$-automorphism acts transitively on geometric fibers.
\end{definition}


\begin{definition}[Affine maps of schemes]
  Let $\varphi: X \to Y$ be a morphism of schemes over a field $k$. We say $\varphi$ is an affine map if every open affine subscheme $U = \Spec(R) \subseteq Y$ has as preimage an affine open subscheme $f^{-1}(U) = \Spec(S)$ of $X$. If, in addition, the corresponding map $R \to S$ makes $S$ into a finitely generated $R$-module, we say that $\varphi$ is finite.
\end{definition}

\begin{proposition}
Let $k$ be a field. Then $X$ is finite \'etale over $\Spec(k)$ if and only f $X$ is isomorphic to a disjoint union $\amalg \Spec(K_i)$, where each $K_i$ is a finite separable extension of $k$
\end{proposition}
\begin{proof}
  Consider first the case that $X$ is connected. It follows that $X = \Spec(A)$ and that $A$ is a vector space of finite dimension over $k$. If $A$ is not a field then it has a
\end{proof}



\begin{definition}[Faithfully flat morphisms]
   An $R$-module $M$ is \textit{flat} if the functor $N \to M \otimes_R M$ is exact. In other words: tensoring with $M$ preserves exact sequences. If the functor is also faithful, we say that $M$ is \textit{faithfully flat} over $R$.
\end{definition}

%
%\section{The \'Etale Fundamental Group}
%\subsection{The Fundamental Group in Topology}
%\subsection{Classical Galois Theory}
%Recall the main theorem of classical Galois theory:
%\begin{theorem}[Main Theorem of Galois theory for finite extensions]
%  Let $L/k$ be a finite Galois extension with Galois group $G$. There is an inclusion reversing bijection between subextension $ L \supset M \supset k$ and subgroups $H \subset G$. It is given by the maps
%  \begin{align*}
%    M &\mapsto \text{Aut}(L/M) \\
%    H &\mapsto L^H.
%  \end{align*}
%  %missing some explanation
%\end{theorem}
%This theorem fails for infinite Galois extensions, as the following example shows:
%% missing example
%