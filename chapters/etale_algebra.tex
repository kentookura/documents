\section{\'Etale Algebras}
We will first consider the case of \'etale algebras over a field $k$. Under the $\Spec$ functor, a finite \'etale algebra $k \to A$ gets mapped to to a disjoint union of points lying ``smoothly'' over $\Spec(k)$. This should be expected, as a space locally isomorphic to a point should just be a disjoint union of points.

\subsection{Reminder on field extensions and Galois theory}
\begin{construction}
	Let $k$ be a field and fix once and for all separable and algebraic closures $k_s \subset \overline{k}$ of $k$. Recall that an extension $L/k$ is separable if its minimal polynomial $p(x)$ has no multiple roots (in a splitting field of $p(x)$). It follows from basic algebra that a polynomial $p(x)$ is separable if and only if it is coprime to its derivative $p'(x)$. This means that $p'(x)$ gets mapped to a unit under the canonical map $k[x] \to k[x]/(p(x)) \simeq L$. An algebraic extension $L$ of $k$ is a \textit{Galois extension} if the elements of $L$ that are fixed under the automorphism group $\Aut_k(L)$ are precisely the elements of $k$.A separable extension $L/k$ is Galois if and only if the minimal polynomial of each element $a \in L$ splits into linear factors in $L$. If $L$ is Galois, we call $\Aut_k(L)$ the \textit{Galois group} of $L$ over $k$ and denote it by $\Gal(L/k)$. In particular $k_s$ is a Galois extension. We call its Galois group the \textit{absolute Galois group of $k$} and denote it by $\Gal(k)$.
\end{construction}

\begin{remark}
	Separability of an extension $L/k$ is in effect a smoothness condition, reminiscent of the conditions under which the inverse mapping theorem from analysis holds
\end{remark}

\begin{theorem}[Main theorem of Galois theory]
	Let $K$ be a Galois extension of $k$ and $L$ a subextension. Then $\Gal(K/L)$ is a closed subgroup of $\Gal(K/k)$. Moreover, there is an inclusion reversing bijection between subfields of $K$ and closed subgroups $H \subset G$, given by the maps
	\[
		L \to H \coloneqq \Gal(K/L) \quad \text{ and } \quad H \to L \coloneqq K^H,
	\]
	where $K^H$ denotes the subfield of $K$ fixed by $H$. A subextension $L/k$ is Galois over $k$ if and only if $\Gal(K/L)$ is normal in $\Gal(K/k)$.
\end{theorem}

\begin{proof}
	See \cite{Szamuely}, Theorem 1.3.11.
\end{proof}

\begin{definition}
	A $k$-algebra $A$ is \'etale over $k$ if it is isomorphic to a product of separable extensions of $k$. If $A$ is finite dimensional over $k$ we say that $A$ is finite \'etale over $k$. We define $\Spec(A) \to \Spec(k)$ to be \'etale (respectively finite \'etale) if $A$ is an \'etale (respectively finite \'etale) algebra over $k$.
\end{definition}

\begin{construction}
	Consider the category $\Sepk$ of \'etale algebras over $k$ and fix separable and algebraic closures $k^\sep \subset \overline{k}$. The initial object of this category is $k$ itself. Consider the representable functor
	\[
		\Hom(-, k^\sep) \colon \Sepk \to \Gal(k)\text{-Set}.
	\]
	For a finite separable extension $L$ of $k$, the number of homomorphisms from $L$ into $k^\sep$ is $[L:k] = n$, so the cardinality of $\Hom(L, k^\sep)$ is $n$. This is indeed a $\Gal(k)$-Set, with the action given by $(g, \varphi) \to g \circ \varphi$ for $g \in \Gal(k)$ and $\varphi \in \Hom_k(L, k^\sep)$. More generally, consider an \'etale $k$-algebra $A \simeq \prod L_i$. Then the number of homomorphisms from $A$ to $k^\sep$ are $\prod n_i$
\end{construction}

\subsection{Interlude ondiscrete \texorpdfstring{$G$}{G}-modules}
The ultimate goal of this section is now to construct an equivalence of categories between the category of finite \'etale $k$-algebras and the category of finite sets with continuous let $\Gal(k)$-action. In general, sets with a continuous $G$-action for a fixed group $G$ will be relevant to us, so we construct some examples and make some preliminary definitions.

\begin{definition}[Discrete $G$-modules]
	A discrete $G$-module is an abelian group $M$ endowed with a left action $a: G \times M \to M$ such that $a$ is continuous if $M$ is given the discrete topology.
\end{definition}

\begin{example}
	Let	$L$ be a finite separable extension of $k$. The set $\Hom_k(L, k_s)$ is finite has cardinality $[L:k]$. This set is endowed with a left action of $\Gal(k_s/k)$ given by $\varphi \to g \circ \varphi$ for $g \in \Gal(k)$ and $\varphi \in \Hom_k(L, k_s)$. If $k_s$ is an infinte extension, $\Gal(k)$ is a profinite group and hence carries a totally disconnected topology.
\end{example}

\begin{lemma}\label{lemma:stabilizer}
	Let $G$ be a topological group and $X$ a discrete space with a $G$-action $m \colon G \times X \to X$. Then $m$ is continuous if and only if each stabilizer
	\[
		G_x = \{ g \in G \mid gx = x \}
	\]
	is open in $G$.
\end{lemma}

\begin{proof}
	Consider the preimage $U_x \eqqcolon \{ (g,y) \in G \times X \colon gy = x\}$ of a point $x \in X$ under the map $m: G \times X \to X$. We can write $U_x$ as a disjoint union of sets $\{(g,y) \in G \times \{y\} \colon gy = x\}$. These sets are either empty or homeomorphic to $G_x$ under the map $g \to (gh, y)$, where $h$ is such that $hy = x$, which implies that $ghy = gx = x$, so we have that the openness of $G_x$ implies the continuity of $m$. Conversely, $G_x$ is the preimage of $x$ under the composition $G \xrightarrow{i_x} G \times X \xrightarrow{m} X$, where $i_x(g) = (g,x)$, so $G_x$ is open if $m$ is continuous.
\end{proof}

\subsection{Classification theorems for \'etale algebras}
Here we ``completely'' a number of categories.
\begin{proposition}
	The action of $\Gal(k)$ on $\Hom_k(L, k_s)$ is continuous and transitive. Furthermore, the functor mapping an \'etale algebra to a $\Gal(k)$-set restricts to an equivalence between the category of finite separable extensions of $k$ and the category of finite sets with a continuous and transitive left $\Gal(k)$-action.
\end{proposition}

\begin{corollary}
	If $L$ is Galois over $k$, then $\Hom_k(L,k_s) \cong \Gal(k)/\Gal(L)$.
\end{corollary}

\begin{proof}
	By theorem \ref{lemma:stabilizer}, the stabilizer $U_\varphi$ is open in $\Gal(k)$, so the action is continuous. By the theorem of the primitive elements, $L$ is generated by some $\alpha$ with minimal polynomial $f$ and each $\varphi \in \Hom_k(L,k_s)$ is given by mapping $\alpha$ to a root of $f$ in $k_s$, and $\Gal(k)$ permutes these roots transitively, and the statement follows.
\end{proof}\\

We obtain a map $\Hom_k(L,k_s) \to U \Gal(k)$, which is in fact an isomorphism of $\Gal(k)$-sets. Now if $U$ is normal we obtain the quotient $\Gal(k)/U$, which happens if and only if $L$ is Galois over $k$.


\begin{construction}
	Let $F$ be a presheaf on $\Et/\Spec(k)$. By abuse of notation we write $F(K)$ instad of $F(\Spec(K))$. We define a descrete $G$-module $M_F$ as follows: If $L/k$ is a finite separable extension, then $G = \Gal(k)$ acts on $F(L)$ by functoriality of $F$. Define $M_F = \colim F(L)$ where $L$ runs over all subfields $L$ of $k_s$ that are finite over $k$. Then $M_F$ is a discrete $G$-module. Conversely, for a discrete $G$-module $M$ we define a sheaf $F_M$ by setting $F_M(A) = \Hom_G(F(A),M)$ where $F(A) = \Hom_k(A,k_s)$. By Theorem \ref{thm:sheaf_condition}, presheaf $F$ on $\Et/k$ is a sheaf if and only if \ref{diagram:equalizer} is exact for a single affine cover $\Spec(A) \to \Spec(B)$, but affine \'etale covers in $\Et/k$ are precisely of the form $\displaystyle \coprod \Spec(L_i) \to \displaystyle \coprod \Spec(K_j)$ where each $L_i$ and $K_j$ is separable over $k$, so the sequence \[ F(\Spec(L)) \to \prod_{i} F(\Spec(L_i)) \xbigtoto{} \prod_{i,j} F(\Spec(L_i \otimes_L L_j)) \] needs to be exact.
\end{construction}

\begin{enumerate}
	\item $F(\prod A_i) = \bigoplus F(A_i)$ for every finite family $\{A_i\}$ of \'etale algebra
	\item $F(L) \xrightarrow{\sim} F(K)^{\Gal(K/k)}$ for finite Galois extensions $K/L/k$
\end{enumerate}

For $F$ a sheaf on $\Et/k$ define $M_F = \varinjlim F(K)$, where the colimit runs over all finite Galois extensions over $k$. Then $M_F$ is a discrete $\Gal(k)$-module. Converseley, if $M$ is a discrete $G$-module, define $F_m(A) = \Hom_{\Gal(k)}(F(A),M)$, where $F(A) = \Hom(A, k_s)$. Then $F_M$ is a sheaf on $\Spec(k)$. This defines an equivalence of categories between the \'etale topos $\sh(\Et/k)$ of $k$ and the category of discrete $G$-modules.

\begin{construction}
	Let $G$ be a topological group. Denote by $BG$ the category of \textit{right $G$-sets} whose objects are sets $X$ equipped with a right $G$-action $X \times G \to X$ which is continuous when $X$ is given the discrete topology. Let $\Hom_G(X,Y)$ denote the set of morphisms in $BG$, which consists $G$-equivariant functions.
\end{construction}



\begin{definition}

\end{definition}

\begin{theorem}[Main Theorem of Galois Theory, Grothendieck's version]\label{theorem:galois}
	Let $k$ be a field. The functor mapping a finite \'etale $k$-algebra $A$ to the finite set $\Hom_k(A, k_s)$ induces an equivalence of categories between the cateogry of \'etale $k$-algebras and the category of sets with a continous left $\text{Gal}(k)$-action
\end{theorem}

\begin{proof}
	$A$ is isomorphic to a product of finite separable extension $\prod L_i$.Each element of the $\Gal(k)$-set $\coprod_i \Hom_k(L_i, k_s)$ has an open stabilizer by definition of the profinite topology on $\Gal(k)$. Conversely consider a $\Gal(k)$ set $T$ and write it as a disjoint union of orbits $\coprod T_i$. Pick an element $t_i \in T_i$ and let $G_i \subset \Gal(k)$ be its open stabilizer. Then the scheme
	\[
		\coprod_i \Spec(k_s^{G_i})
	\]
	is \'etale over $k$ because by Galois theory each $k_s^{G_i}$ is a finite separable extension of $k$. This gives an inverse to the functor.
\end{proof}

The following theorem is strongly reminiscent of the following theorem from algebraic topology:

\begin{theorem}
	Let $(X,x)$ be a pointed, connected and locally simply connected topological space. The fiber functor $\text{Fib}_x$ induces an equivalence of categories between the category of covers of $X$ with the category of left $\pi_1(X,x)$-sets.
\end{theorem}

See Chapter (...) for the definitions used in the statement.

Let $L/K$ be a finite field extension of degree $n$. Each element $a$ of $L$ induces a $K$-linear map
\[
	m_a: L \to L,\ b \to ab.
\]
Since $L \cong K^{\oplus n}$ as a $K$-module, we may choose a basis of $L$ over $K$ and represent the map $m_a$ as an $n \times n$ matrix with entries in $K$. We may take the trace and determinant of this matrix. But the trace and determinant are independent of the choice of the choice of basis, so
\[
	\Tr_{L/K}(a) = \Tr(\text{matrix of }m_a)
\]
and
\[
	\Norm_{L/K}(a) = \text{det}(\text{matrix of }m_a).
\]
are well defined.

\begin{definition}
	Let $L/K$ be a finite field extension. The \textit{trace pairing for $L/K$} is the symmetric $K$-bilinear form
	\[
		Q_{L/K} : L \times L \to K,\ (a,b) \to \Tr_{L/K}(ab)
	\]
\end{definition}

\begin{lemma}
	Let $L/K$ be a finite field extension. The following are equivalent:
	\begin{enumerate}
		\item $L/K$ is separable.
		\item $\Tr_{L/K}$ is not identically zero.
		\item $Q_{L/K}$ is nondegenerate.
	\end{enumerate}
\end{lemma}

\begin{proof}
	The equivalence of (2.) and (3.) are clear.
	For the equivalence of (1.) and (2.) see (Keith Conrad, separability)
	%The trace map is $K$-linear with target $K$ so it is either identically 0 or surjective. We only have to consider the case where $K$ has characteristic $p \neq 0$, since finite extensions in characteristic 0 are always separable and $\Tr_{L/K}(1) = [L:K] \neq 0$ in characteristic 0.\par
	%Let $L/K$ be separable. By the primitive element theorem we can write $L = K(\alpha)$, where $\alpha$ is separable over $K$.
\end{proof}

\begin{theorem}
	Let $A$ be a finite dimensional commutative $k$-algebra and denote by $\overline{A}$ the $\overline{k}$-algebra $A \otimes_k \overline{k}$. The following are equivalent:
	\begin{enumerate}
		\item $A$ is \'etale over $k$.\label{etale}
		\item $A \otimes_k \overline{k}$ is isomorphic to a finite product of copies of $\overline{k}$, hence \'etale over $\overline{k}$.\label{product}
		\item $A \otimes_k \overline{k}$ is reduced
		\item The discriminant of any basis of $A$ over $k$ is nonzero.\label{trace}
		      %The trace pairing $A \times A \to k, (x,y) \to \text{Tr}(xy)$ is nondegenerate.
	\end{enumerate}
\end{theorem}

\begin{proof}
	(\Implies{etale}{product}):
	Suppose that $L$ is a finite separable extension of $k$. This means that $L = k[x]/(f)$, where $f$ is a polynomial of degree $n$ which splits into $n$ distinct factors, say $(x-\alpha_i)$ in $\overline{k}$. By the chinese remainder theorem we have
	\[L \otimes_k \overline{k} \cong \overline{k}[x]/(f) = \overline{k}[x]/(x-\alpha_1)\cdots(x-\alpha_n) \cong \prod_{i=1}^n \overline{k}[x] / (x-\alpha_i) \cong \prod_{i=1}^n \overline{k},\] from which the first direction follows.\\
	(\Implies{etale}{trace}):
	If $A = \prod k_i$ where each $k_i$ is a separable field extension of $k$, then $\text{disc}(A) = \prod \text{disc}(k_i)$ which is nonzero by the fact that $\text{disc}(k_i) \neq 0$ if $k_i$ is a separable extension.
	%TODO finish the proof
\end{proof}

We generalise the notion of \'etale algebra to algebras over a ring.

\begin{definition}
	Let $R$ be a ring, $A$ a free $R$-algebra of finite rank. As before, every $a \in A$ defines an $R$-linear map by multiplication and the trace map $A \to R$ is well defined. We say that $A$ is a \textit{separable} or \textit{\'etale} algebra if the $R$-bilinear mapping
	\[
		Q : A \times A \to R,\ (a,b) \to \Tr(ab)
	\]
	is nondegenerate.
\end{definition}
