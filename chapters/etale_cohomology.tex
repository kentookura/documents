\section{Sheaf Cohomology}

\subsection{Exact sequences and Cohomology}

In linear algebra the notions of kernel and cokernel quantify the failure of a map to be injective or surjective. If a map has trivial kernel, it is injectve, if it has trivial cokernel, it is surjective. Cohomology plays a similar role in homological algebra, where we are often faced with the following situation:
Let
\[
	0 \to A \to B \to C \to 0
\]
be an exact sequence in an abelian category $C$ and $F$ a left exact functor to abelian groups. This means that
\[
	0 \to F(A) \to F(B) \to F(C)
\]
is exact. We  would like to fill in this exact sequence on the right with functors $H^i(-): C \to \Ab$ for $i \ge 0$ with the following properties:
\begin{enumerate}
	\item The cohomology $H^0(A)$ in degree 0 should be $F(A)$
	\item Given a short exact sequence as above, there should be a long exact sequence
	      \[
		      \cdots H^i(A) \shortto H^i(B) \shortto H^i(C) \shortto H^{i+1}(A) \shortto H^{i+1}(B) \shortto H^{i+1}(C) \shortto \cdots
	      \]
\end{enumerate}

We have seen that both the global sections functor $\Gamma(X,-): \Ab(X) \to \Set$ and the fixed-point functor left exact. The theory of derived functors allows us to define cohomology for left (or right) exact functors quite generally, as long as the domain of the functor has enough injectives. An injective object $I$ is one for which the functor $\Hom(-,I)$ is exact. If $C$ is an abelian category with enough injectives, every object $A$ has an injective resolution $A \to I^\bullet$, which is an exact sequence
\[
	0 \to A \to I^0 \to I^1 \to \cdots
\]
where each $I^k$ is an injective object. Given a left exact functor $F$ from $C$ to some other abelian category (in our case abelian groups), one defines the $i$-th right derived functor $R^i F$ by choosing for each object $A$ of $C$ an injective resolution $A \to I^\bullet$ and defining
\[
	R^i F(A) \coloneqq H^i(F(I^\bullet)).
\]
One needs to show that these functors do not depend on the choice of injective resolution. While very general, the formalism of derived functors is unintuitive and in practice we will compute cohomology using different methods.

\subsection{Homological algebra in \texorpdfstring{$\mathsf{Ab}(X)$}{Ab(X)}}

We will now define the notion of injectivity and surjectivity for maps of sheaves. The categorification of injective mpas are monomorphisms, while surjective maps correspond to epimorphisms. Epimorphisms of sheaves are tricky and the reason why sheaf cohomology is a non-trivial invariant. The general frameworks in which to study (co-)homology are abelian categories. The notion of an abelian category is an abstraction of the category of abelian groups. Abelian categories are the general setting in which to do homological algebra.

\begin{definition}[Monomorphisms and Epimorphisms]
	Let $f: X \to Y$ be a morphism (in any category). We say that $f$ is a \textit{monomorphism} if $f \circ g_1 = f \circ g_2 \implies g_1 = g_2$.
	We say that $f$ is a \textit{epimorphism} if $g_1 \circ  f  = g_2 \circ f \implies g_1 = g_2$.
\end{definition}

\begin{proposition}[Monomorphisms in $\sh(C,J)$]
	Let $\varphi: F \to G$ be a morphism of sheaves on a site $(C,J)$. We say that $\varphi$ is injective if for each object $U$ of $C$, the map $\varphi: F(U) \to G(U)$ is injective.
\end{proposition}

\begin{proposition}[Epimorphisms in $\sh(C,J)$]
	A morphism of sheaves $\varphi: F \to G$ is an epimorphism in $\Sh(C,J)$ if and only if for every object $U$ and every section $s \in G(U)$ there exists a covering $\{U_i \to U\}$ such that the restriction $s|_{U_i}$ is contained in the image of $\varphi: F(U_i) \to G(U_i)$. We also say that \textit{$\varphi$ is locally surjective}.
\end{proposition}

\begin{proof}
	$(\implies)$ Suppose that $\varphi$ is locally surjective. For any object $U$ of $C$ and any $s \in G(U)$ choose a cover $\{f_i: U_i \to U\}$ as stated in the proposition. Let $\alpha_1, \alpha_2: G \to H$ be morphisms such that $\alpha_1 \circ \varphi = \alpha_2 \circ \varphi$.
	\[
		% https://q.uiver.app/?q=WzAsMyxbMCwwLCJGIl0sWzEsMCwiRyJdLFsyLDAsIkgiXSxbMCwxLCJcXHZhcnBoaSJdLFsxLDIsIlxcYWxwaGFfMiIsMix7Im9mZnNldCI6MX1dLFsxLDIsIlxcYWxwaGFfMSIsMCx7Im9mZnNldCI6LTF9XV0=
		\begin{tikzcd}
			F & G & H
			\arrow["\varphi", from=1-1, to=1-2]
			\arrow["{\alpha_2}"', shift right=1, from=1-2, to=1-3]
			\arrow["{\alpha_1}", shift left=1, from=1-2, to=1-3]
		\end{tikzcd}\]
	We need to show that $\alpha_1 = \alpha_2$.  Now for each $f_i: U_i \to U$ and each section $s \in F(U)$ we have $(\alpha_1 \circ f_i)(s) = (\alpha_2 \circ f_i)(s)$ or equivalently  $\alpha_1(s)|_{U_i} = \alpha_2(s)|_{U_i}$. This means that $\alpha_1$ agrees with $\alpha_2$ for the cover $\{U_i\}$. Since $H$ is a sheaf it follows that $\alpha_1 = \alpha_2$.\par
	$(\impliedby)$
\end{proof}

\begin{definition}[Additive categories]
	An \textit{additive category} is a category $C$ with finite direct sums such that the sets $\Hom(A,B)$ have the structure of an abelian group
\end{definition}

\begin{definition}[Kernels]
	Let $C$ be a category with an initial object $0$ and pullbacks. The kernel of a morphism $f: A \to B$ is the pullback
	\[
		% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXGtlciBmIl0sWzAsMSwiQSJdLFsxLDAsIjAiXSxbMSwxLCJCIl0sWzAsMV0sWzAsMl0sWzEsMywiZiIsMl0sWzIsM11d
		\begin{tikzcd}
			{\ker f} & 0 \\
			A & B
			\arrow[from=1-1, to=2-1]
			\arrow[from=1-1, to=1-2]
			\arrow["f"', from=2-1, to=2-2]
			\arrow[from=1-2, to=2-2]
		\end{tikzcd}.
	\]
	If $C$ is enriched over abelian groups, meaning that $\Hom(A,B)$ has the structure of an abelian group for all objects $A,B \in C$, there is a distinguished morphism $0_{A,B} : A \to B$. This morphism factors through the initial object $0$. In this case, the kernel of $f$ may be realized as the equalizer of the diagram
	\[
		% https://q.uiver.app/?q=WzAsMixbMCwwLCJBIl0sWzEsMCwiQiJdLFswLDEsImYiLDIseyJvZmZzZXQiOjF9XSxbMCwxLCIwX3tBLEJ9IiwwLHsib2Zmc2V0IjotMX1dXQ==
		\begin{tikzcd}
			A & B
			\arrow["f"', shift right=1, from=1-1, to=1-2]
			\arrow["{0_{A,B}}", shift left=1, from=1-1, to=1-2]
		\end{tikzcd}
	\]
\end{definition}

\begin{definition}[Exact sequences]
	Fix an abelian category $C$.  A sequence
	\[ \cdots \xrightarrow{\varphi_{i-1}} A_{i-1} \xrightarrow{\varphi_{i}} A_{i} \xrightarrow{\varphi_{i+1}} A_{i+1} \to \cdots\]
	in $C$ is called \textit{exact} if the map from $A \to B$ is a monomorphism
\end{definition}

\begin{example}
	There is a short exact sequence in $\Ab(X)$ for a scheme $X$, given By
	\[
		0 \to \mu_{n,X} \to \Gm \xrightarrow{x \to x^n} \Gm \to 0.
	\]
	The fact that it is left exact is clear.
\end{example}

\begin{remark}
	An \textit{abelian category} is a category $\mathcal{A}$ such that
	\begin{enumerate}
		\item for any two objects $A,B$ of $\mathcal{A}$, $\Hom(A,B)$ is an abelian group,
		\item every morphism has a kernel and cokernel,
		\item every monomorphism is a kernel,
		\item every epimorphism is a cokernel.
	\end{enumerate}
\end{remark}

\begin{definition}
	A sequence of sheaves $\to \Sh{F}_{i-1} \to \Sh{F}_{i} \to \Sh{F}_{i+1} \to$
	is exact if for each $i$, $\ker \varphi_i = im \varphi_{i-1}$.
\end{definition}

\begin{definition}[Constant sheaves]
	Let $X$ be a quasi-compact scheme. The sheafification of the presheaf $U \to S$ for a set $X$ is called the \textit{constant sheaf on $S$}.
\end{definition}

\begin{definition}[Locally constant sheaves]
	A sheaf $F$ on $X$ is locally constant if there is an \'etale covering $\{U_i\}$ of $X$ such that $F|_{U_i}$ is a constant sheaf for each $U_i$. If in addition the associated set for each $U_i$ is finite, we say that $F$ is \textit{locally constant constructible}.
\end{definition}

\begin{theorem}
	The functor
\end{theorem}

\begin{proposition}
	Let $X$ be a connected scheme and $x$ a geometric point of $X$. The functor $F \to F_{\overline{x}}$ induces an equivalence between the category of locally constant sheaves of sets with finite stalks on $X$ and the category of finite $\pi_1^{\et}(X,\overline{x})$-sets.
\end{proposition}
\begin{proof}

\end{proof}

\subsection{Galois theory for \'etale covers}
\begin{definition}[The fiber functor $F_x$]
	Let $x: \Spec(\Omega) \to X$ be a geometric point, where $\Omega$ is an algebraically field. The fiber functor at $x$ associates to each \'etale cover $f: Y \to X$ the underlying set of $\Spec(\Omega) \times_X Y$.
\end{definition}

\begin{definition}[Galois covers]
	A connected finite \'etale cover $Y \to X$ is \textit{Galois} if its group of $X$-automorphism acts transitively on geometric fibers.
\end{definition}

\begin{theorem}
	If $X$ is an irreducible topological space and $\Sh{F}$ is a constant sheaf, then $H^r(X, \Sh{F})$ for all $r>0$.
\end{theorem}
\begin{proof}
	Since any open set $U \subseteq X$ is connected, $\Sh{F}(U) = G$ if $\Sh{F}$ is the constant sheaf defined by the group $G$ and $U$ is nonempty. This means that $\Sh{F}$ is flasque, hence $H^r(X, \Sh{F})$ for all $r>0$.
\end{proof}
It follows that constant sheaves on varieties have no higher cohomology. The reason ist that there are not enough open sets in the Zariski topology. This was the reason for defining the \'etale topology. We will now see how the \'etale topology yields good cohomological results

As we have seen, sheaves relate the local and global information one has on a given topological space $X$. In a sense sheaf cohomology measures how much more information we gain when we go from global to local. For example, consider the sheaf of local sections of the covering space $\pi : X \to S^1$.
%
%\begin{tikzpicture}[declare function={f(\x)=0.2*sin(\x)+\x/1000;},
%  rubout/.style={/utils/exec=\tikzset{rubout/.cd,#1},
%  decoration={show path construction,
%       curveto code={
%        \draw [white,line width=\pgfkeysvalueof{/tikz/rubout/line width}+2*\pgfkeysvalueof{/tikz/rubout/halo}] 
%         (\tikzinputsegmentfirst) .. controls
%         (\tikzinputsegmentsupporta) and (\tikzinputsegmentsupportb)  ..(\tikzinputsegmentlast); 
%        \draw [line width=\pgfkeysvalueof{/tikz/rubout/line width},shorten <=-0.1pt,shorten >=-0.1pt] (\tikzinputsegmentfirst) .. controls
%         (\tikzinputsegmentsupporta) and (\tikzinputsegmentsupportb) ..(\tikzinputsegmentlast);  
%       }}},rubout/.cd,line width/.initial=2pt,halo/.initial=0.5pt]
%  \draw[rubout={line width=2pt,halo=0.5pt},decorate] 
%    plot[variable=\x,domain=-50:970,samples=55,smooth] ({cos(\x)},{f(\x)}) to[out=0,in=195] cycle;
%  \draw[line width=2pt] (0,-2) arc(-90:270:1cm and 0.2cm);
%  \draw[thick,-stealth]  (0,-0.4) -- (0,-1.4) node[midway,right]{$\pi$};
% \end{tikzpicture} 
%
%There is no global section $s: S^1 \to X$ but locally, the set of sections $\{s: U \to \pi^{-1}(U) | \pi \circ s = id\}$ is a set with three elements.
%
%Let $X$ be a topological space. A theorem of algebraic topology says that for any abelian group $A$, the cohomology group $H^1(X,A)$ with coefficients in $A$ is isomorphic to the abelianisation of the fundamental group $\pi_1(X)$




Simple Examples:
Brauer group of a dedekind ring or something
Serres theorem: there d
\begin{theorem}
	There does not exist a cohomology theory for schemes over $\overline{\mathbb{F}}_q$ which satisfiex the Kunneth formula and $H^1(E) = \Q^2$ for $E$ an elliptic curve.
\end{theorem}
The reason we should expect the fact about elliptic curves to hold is because of the often heard slogan that elliptic curves are complex tori, which have singular cohomology $\Z^2$.
